scoreboard players add @s Dialog 1
scoreboard players set @a[scores={Room=21}] MusicType 23
execute if entity @s[scores={Dialog=393}] run stopsound @a[scores={Room=21}] music
execute if entity @s[scores={Dialog=393}] run playsound luigis_mansion:music.water music @a[scores={Room=21}] ~ ~ ~ 1000
execute if entity @s[scores={Dialog=393}] run scoreboard players set @a[scores={Room=21}] Music 240
execute if entity @s[scores={Dialog=632}] if score #players Totals matches 1 run tellraw @a[scores={Room=21}] {"translate":"chat.type.text","with":[{"translate":"luigis_mansion:entity.melody_pianissima","color":"green"},{"translate":"luigis_mansion:dialog.melody_pianissima.composer.1"}]}
execute if entity @s[scores={Dialog=632}] if score #players Totals matches 2.. run tellraw @a[scores={Room=21}] {"translate":"chat.type.text","with":[{"translate":"luigis_mansion:entity.melody_pianissima","color":"green"},{"translate":"luigis_mansion:dialog.melody_pianissima.composer.1.more"}]}
execute if entity @s[scores={Dialog=888}] run tellraw @a[scores={Room=21}] {"translate":"luigis_mansion:message.options","color":"green","extra":[{"text":"\n"},{"translate":"luigis_mansion:dialog.melody_pianissima.composer.yes","clickEvent":{"action":"run_command","value":"/trigger MelodyChoice set 2"}},{"text":"\n"},{"translate":"luigis_mansion:dialog.melody_pianissima.composer.no.1","clickEvent":{"action":"run_command","value":"/trigger MelodyChoice set 1"}},{"text":"\n"},{"translate":"luigis_mansion:dialog.melody_pianissima.composer.no.2","clickEvent":{"action":"run_command","value":"/trigger MelodyChoice set 1"}}]}
execute if entity @s[scores={Dialog=888}] run scoreboard players enable @a[scores={Room=21},gamemode=!spectator] MelodyChoice