execute if entity @s[advancements={luigis_mansion:mansion/hallway=true},tag=!blackout] unless entity @s[scores={MusicType=9}] unless entity @s[scores={MusicType=14}] unless entity @s[scores={MusicType=19}] unless entity @s[scores={MusicType=27}] unless entity @s[x=700,y=112,z=-42,dx=4,dy=16,dz=10] unless entity @s[x=700,y=122,z=-31,dx=4,dy=6,dz=11] run function luigis_mansion:other/music/set/light
execute unless entity @s[advancements={luigis_mansion:mansion/hallway=true},tag=!blackout] unless entity @s[scores={MusicType=6}] unless entity @s[scores={MusicType=14}] unless entity @s[scores={MusicType=19}] unless entity @s[scores={MusicType=27..30}] unless entity @s[x=700,y=112,z=-42,dx=4,dy=16,dz=10] unless entity @s[x=700,y=122,z=-31,dx=4,dy=6,dz=11] run function luigis_mansion:other/music/set/hallway
execute unless entity @s[advancements={luigis_mansion:mansion/attic_hallway_1=true},tag=!blackout] unless entity @s[scores={MusicType=7}] unless entity @s[scores={MusicType=14}] unless entity @s[scores={MusicType=19}] unless entity @s[scores={MusicType=27..30}] if entity @s[x=700,y=112,z=-42,dx=4,dy=16,dz=10] run function luigis_mansion:other/music/set/room
execute unless entity @s[advancements={luigis_mansion:mansion/attic_hallway_1=true},tag=!blackout] unless entity @s[scores={MusicType=7}] unless entity @s[scores={MusicType=14}] unless entity @s[scores={MusicType=19}] unless entity @s[scores={MusicType=27..30}] if entity @s[x=700,y=122,z=-31,dx=4,dy=6,dz=11] run function luigis_mansion:other/music/set/room

execute if block 705 122 -23 #minecraft:doors[open=true] if entity @s[nbt={SelectedItem:{tag:{luigis_mansion:{id:"luigis_mansion:key",room:"safari_room"}}}}] run function luigis_mansion:room/safari_room/unlock_door
execute if block 705 112 -16 #minecraft:doors[open=true] if entity @s[nbt={SelectedItem:{tag:{luigis_mansion:{id:"luigis_mansion:key",room:"sitting_room"}}}}] run function luigis_mansion:room/sitting_room/unlock_door